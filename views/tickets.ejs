<%- include('layout', { body: `
<div class="tickets-page">
  <h2>ë‚´ í‹°ì¼“</h2>

  <div class="ticket-section">
    <h3>ë³µê¶Œ í‹°ì¼“ (${lotteryTickets.length}ì¥)</h3>
    ${lotteryTickets.length === 0 ? '<p class="empty">ì‚¬ìš© ê°€ëŠ¥í•œ ë³µê¶Œ í‹°ì¼“ì´ ì—†ìŠµë‹ˆë‹¤.</p>' : ''}
    ${lotteryTickets.length > 0 ? '<div class="ticket-actions"><button class="btn btn-primary" onclick="playAllLottery()">ì „ì²´ ê¸ê¸°</button></div>' : ''}
    <div class="ticket-grid" id="lottery-grid">
      ${lotteryTickets.map(t => '<div class="ticket-card lottery" id="ticket-' + t.id + '"><div class="ticket-front" onclick="playLottery(' + t.id + ')"><span class="ticket-icon">ğŸ”’</span><span>ê¸ì–´ë³´ì„¸ìš”!</span></div></div>').join('')}
    </div>
  </div>

  <div class="ticket-section">
    <h3>ë£°ë › í‹°ì¼“ (${rouletteTickets.length}ì¥)</h3>
    ${rouletteTickets.length === 0 ? '<p class="empty">ì‚¬ìš© ê°€ëŠ¥í•œ ë£°ë › í‹°ì¼“ì´ ì—†ìŠµë‹ˆë‹¤.</p>' : ''}
    <div class="ticket-grid">
      ${rouletteTickets.map(t => '<div class="ticket-card roulette" id="ticket-' + t.id + '"><button class="btn btn-roulette" onclick="playRoulette(' + t.id + ')">ğŸ° ë£°ë › ëŒë¦¬ê¸°</button></div>').join('')}
    </div>
  </div>

  <div class="roulette-modal" id="roulette-modal" style="display:none">
    <div class="roulette-container">
      <div class="roulette-wheel" id="roulette-wheel">
        ${rouletteTable.map((item, i) => '<div class="roulette-slice" style="background:' + item.color + ';transform:rotate(' + (i * 45) + 'deg)">' + item.label + '</div>').join('')}
      </div>
      <div class="roulette-pointer">â–¼</div>
      <div class="roulette-result" id="roulette-result"></div>
      <button class="btn btn-primary" onclick="closeRoulette()">í™•ì¸</button>
    </div>
  </div>

  <div class="ticket-section">
    <h3>ìµœê·¼ ì‚¬ìš© ë‚´ì—­</h3>
    ${usedTickets.length === 0 ? '<p class="empty">ì‚¬ìš© ë‚´ì—­ì´ ì—†ìŠµë‹ˆë‹¤.</p>' : ''}
    <div class="used-list">
      ${usedTickets.map(t => '<div class="used-item"><span class="used-type">' + (t.type === 'lottery' ? 'ë³µê¶Œ' : 'ë£°ë ›') + '</span><span class="used-amount ' + (t.reward_amount > 0 ? 'win' : 'lose') + '">' + (t.reward_amount > 0 ? Number(t.reward_amount).toLocaleString() + 'ì›' : 'ê½') + '</span></div>').join('')}
    </div>
  </div>
</div>
` }) %>
